<!DOCTYPE html>
<html lang="en">
<script src="./node_modules/web3/dist/web3.min.js"></script>
<body>
<script>

    // https://docs.metamask.io/guide/ethereum-provider.html#using-the-provider
    // https://docs.openzeppelin.com/network-js/0.2/building-a-dapp-from-scratch

    getCurrentProvider = () => {
        if (!window.web3) return 'unknown';

        if (window.web3.currentProvider.isMetaMask)
            return 'metamask';

        if (window.web3.currentProvider.isTrust)
            return 'trust';

        if (window.web3.currentProvider.isGoWallet)
            return 'goWallet';

        if (window.web3.currentProvider.isAlphaWallet)
            return 'alphaWallet';

        if (window.web3.currentProvider.isStatus)
            return 'status';

        if (window.web3.currentProvider.isToshi)
            return 'coinbase';

        if (typeof window.__CIPHER__ !== 'undefined')
            return 'cipher';

        if (window.web3.currentProvider.constructor.name === 'EthereumProvider')
            return 'mist';

        if (window.web3.currentProvider.constructor.name === 'Web3FrameProvider')
            return 'parity';

        if (window.web3.currentProvider.host && window.web3.currentProvider.host.indexOf('infura') !== -1)
            return 'infura';

        if (window.web3.currentProvider.host && window.web3.currentProvider.host.indexOf('localhost') !== -1)
            return 'localhost';

        return 'unknown';
    }

    if (typeof web3 !== 'undefined') {
        // this statement is executed if you are using
        // MetaMask
        async function enableAccounts() {
            await ethereum.enable().then((account) => {
                alert("Account: " + account + "\n" + "Provider Name: " + getCurrentProvider());
            })
        }
        enableAccounts();
    } else {
        // set the provider you want from Web3.providers
        web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
        alert("Account: " + web3.eth.accounts[0] + "\n" + "Provider Name: " + web3.currentProvider.constructor.name);
    }
</script>
</body>
</html>